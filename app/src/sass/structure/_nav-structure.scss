#navpage-wrapper {
    width: 100%;
    height: 100%;
}

/** Primary */

#navpage-primary {
    .navbar-form {
        border: 0;
        box-shadow: none !important;
        font-size: 100%;
        margin-right: 8px;
        padding: 0 15px 8px 6px;
    }
    input.semitransparent {
        opacity: 0.5;

        &:focus {
            opacity: 1;
        }
    }
}

/* Top Right Navigation Dropdown Styles */
.navbar-top-links {
    margin-top: 5px;
    li {
        display: inline-block;
        &:last-child {
            margin-right: 15px;
        }
        a {
            padding: 12px;
            min-height: 42px;
        }
    }

    .dropdown-menu {
        li {
            display: block;
            &:last-child {
                margin-right: 0;
            }
            a div {
                white-space: normal;
            }
        }
        & > li a {
            min-height: 0;
        }

    }

    .dropdown-messages,
    .dropdown-tasks,
    .dropdown-alerts {
        width: 310px;
        min-width: 0;
    }
    .dropdown-messages {
        margin-left: 5px;
    }
    .dropdown-tasks {
        margin-left: -59px;
    }
    .dropdown-alerts {
        margin-left: -123px;
    }
    .dropdown-user {
        right: 0;
        left: auto;
    }
}

@include respond-to(medium-screens) {
    .navbar-top-links .dropdown-messages,
    .navbar-top-links .dropdown-tasks,
    .navbar-top-links .dropdown-alerts {
        margin-left: auto;
    }
}

.navbar-static-top .nav > li {
    & > a {
        font-weight: normal;
    }
}

// Media Query tweak!
@media (max-width: 979px) {
    .navbar-inner {
        min-height: $nav-primary-min-height;
    }
    .navbar-inner ul.dropdown-menu li {
        float: left;
        padding: 0;
    }
    .navbar-collapse .navbar > li {
        clear: both;
    }
    .navbar-collapse.collapse {
        margin-left: 8px;
    }
    .navbar-collapse .navbar .navbar-header {
        padding: 5px 12px 5px 24px;
    }
    .navbar-collapse .navbar > li > a, .navbar-collapse .dropdown-menu a {
        padding: 5px 12px;
    }
    .navbar .navbar-btn {
        margin-top: 14px !important;
    }
}

/** Seconadary */


/*
 * We have 4 states of the secondary navigation:
 * Small mode: (triggered by menu-'hamburger' ):
 * - Hidden (#navpage-wrapper.nav-secondary-opened not set)
 * - Shown (#navpage-wrapper.nav-secondary-opened set)
 * Large mode (triggered by expand/collapse button):
 * - Expanded (#navpage-wrapper.nav-secondary-collapsed not set)
 * - Collapsed (#navpage-wrapper.nav-secondary-collapsed set)
 */

/**** MODE: Hidden ****/

#navpage-secondary {
    visibility: visible;
    display: block;
    z-index: $zindex-secondary-nav; // We must use a ridiculous value like this, because Symfony's dumper uses 100000.
    position: absolute;
    width: $nav-secondary-small-width;
    padding-top: $nav-secondary-top-padding;
    height: 100%;
    left: -$nav-secondary-small-width;
    transition: left 0.1s, width 0.1s;
    font-size: 120%;

    ul.submenu {
        @include hide();
        font-size: 90%;

        &.show {
            @include show();
        }

        & > li.subdivider {
            border-top: 1px dashed lighten($sidebarbackground, 20);
        }

        a {
            padding: $nav-secondary-v-padding $nav-secondary-h-padding $nav-secondary-v-padding ($nav-secondary-h-padding + $nav-secondary-indent);
            text-indent: -$nav-secondary-indent;
            font-weight: normal;

            @media (max-width: 640px) {
                padding: ($nav-secondary-v-padding - 2px) $nav-secondary-h-padding ($nav-secondary-v-padding - 2px) ($nav-secondary-h-padding + $nav-secondary-indent);
            }

            i {
                width: $nav-secondary-icon-size;
                margin-right: $nav-secondary-icon-margin;
                text-indent: 0;
            }
        }
    }
}

/**** MODE: Shown ****/

.nav-secondary-opened {

    #navpage-secondary {
        left: 0;
    }
}

/**** MODE: Expanded ****/

@include respond-to(medium-screens) {
    #navpage-secondary {
        width: $nav-secondary-large-width;
        left: 0;
        position: absolute;
        font-size: 100%;

        & > ul {
            width: $nav-secondary-large-width;
        }
    }
}

/**** MODE: Collapsed ****/

@include respond-to(medium-screens) {
    #navpage-wrapper.nav-secondary-collapsed {

        #navpage-secondary {
            width: $nav-secondary-collapsed-width;
            overflow: hidden;

            .nav > li {
                a {
                    color: $sidebartextcolourcollapsed;
                }
            }
        }

    }

    #navpage-wrapper.nav-secondary-collapsed-hoverable {

        #navpage-secondary:hover {
            width: $nav-secondary-large-width;
            overflow: visible;

            .nav > li {
                a {
                    color: $sidebarlink;
                }
            }
        }
    }

}

/* --------------- */

#navpage-secondary .nav > li {
    & > a,
    & > form,
    & > em {
        padding: ($nav-secondary-v-padding + 4px) $nav-secondary-h-padding $nav-secondary-v-padding ($nav-secondary-h-padding + $nav-secondary-indent + 2px);
        display: block;
        font-weight: normal;
        max-height: 3.6em;
        overflow: hidden;
        cursor: pointer;
    }
    &.nav-secondary-dashboard {
        & > a {
            padding: ($nav-secondary-v-padding + 4px) $nav-secondary-h-padding ($nav-secondary-v-padding + 4px) ($nav-secondary-h-padding + $nav-secondary-indent + 2px);
        }
    }

    a.menu-pop {
      @include ellipsis();
    }

    a.menu-pop:before {
        display: inline-block;
        font-family: fontawesome;
     // float: right;
        content: "\f0da";
        text-indent: 0;
        font-size: 120%;
        padding-left: 4px;
        line-height: ($nav-secondary-icon-size - 2px);
    }

    &:hover > a,
    a:focus {
        color: $sidebarlinkhover;
        background: $sidebarbackgroundhover;
        i.icon {
            background: $sidebarlinkhover;
        }
    }

    & > em {
        font-weight: bold;
        font-style: normal;

        i.icon {
            top: 17px;
        }
    }

    &.active > a {
        color: $sidebarlinkactive;
        background: $sidebarbackgroundactive;
        i.icon {
            background: $sidebarlinkactive;
        }
    }

    &.divider {
        @include nav-secondary-divider();
    }

    &.search {
        padding-bottom: $nav-secondary-divider-margin;

        form {
            margin: 0;
            padding-top: 0;
            border: none;
            box-shadow: none;
        }

        .form-group {
            vertical-align: middle;
            display: inline-block;
            width: ($nav-secondary-small-width - (2 * $nav-secondary-h-padding) - $nav-secondary-indent - 4px);
            text-indent: 0;
            margin: 0;
        }

        .select2-container {
            padding: 4px 8px;
        }

        @include respond-to(medium-screens) {
            @include hide();
        }
    }

    i.icon {
        display: block;
        margin-right: $nav-secondary-icon-margin;
        width: $nav-secondary-icon-size;
        height: $nav-secondary-icon-size;
        line-height: $nav-secondary-icon-size;
        text-align: center;
    //  vertical-align: baseline;
        text-indent: 0;
        font-style: normal;
        font-weight: bold;
        font-size: ($nav-secondary-icon-size - 8px);
        position: absolute;
        left: 12px;
        top: 10px;

        &:before {
            font-weight: normal;
        }
    }

    .popover.right {
        margin-left: -16px;
    }

    .popover-content {
        z-index: 20;
        padding: 3px;
        overflow: hidden;
        text-indent: 0;

        a {
            $indent: 32px;

            display: block;
            padding: 4px 6px 4px 4px;
            font-size: 100%;
            text-indent: -$indent;
            padding-left: $indent;
            text-overflow: ellipsis;
            white-space: nowrap;

            i {
                width: $indent;
                text-indent: 0;
            }
        }

        hr {
            margin: 4px 0;
            padding: 0 8px;
        }
    }
}

.arrow {
    float: right;
}

.fa.arrow:before {
    content: "\f104";
}

.active > a > .fa.arrow:before {
    content: "\f107";
}

/**** Collapse/expand buttons ****/

/* Never show mall mode */

.nav-secondary-collapse,
.nav-secondary-expand {
    @include nav-secondary-divider();
    @include hide();
}

@include respond-to(medium-screens) {
    .nav-secondary-collapse {
        @include show();
    }
    .nav-secondary-expand {
        @include hide();
    }
    .nav-secondary-collapsed {
        .nav-secondary-collapse {
            @include hide();
        }
        .nav-secondary-expand {
            @include show();
        }
    }
}

// Hack to get magnific popup displayed properly.
body.mfp-zoom-out-cur #navpage-secondary {
    z-index: 1000;
}


/** Content */

/**** MODE: Hidden + Shown ****/
#navpage-content {
    padding: 12px 16px 60px 6px;
    transition: left 0.3s;
    position: absolute;
    left: 0;
    right: 0;
}

@include respond-to(medium-screens) {
    /**** MODE: Expanded ****/
    #navpage-content {
        padding-top: 16px;
        padding-left: 42px;
        left: $nav-secondary-large-width;
    }

    /**** MODE: Collapsed ****/
    #navpage-wrapper.nav-secondary-collapsed {
        #navpage-content {
            padding-left: 42px;
            left: $nav-secondary-collapsed-width;
        }
    }
}
